{% if namespace %}
namespace {{ namespace }};
{% endif %}

use GuzzleHttp\Exception\BadResponseException;
use Sdkgen\Client\ClientAbstract;
use Sdkgen\Client\Credentials;
use Sdkgen\Client\Exception\ClientException;
use Sdkgen\Client\Exception\UnknownStatusCodeException;

class Client extends ClientAbstract
{
{% for tag in tags %}
    public function {{ tag.methodName }}(): {{ tag.className }}
    {
        return new {{ tag.className }}(
            $this->httpClient,
            $this->parser
        );
    }

{% endfor %}
{{ operations|raw }}

{% if security.type == 'httpBasic' %}
    public static function build(string $baseUrl, string $userName, string $password): self
    {
        return new self($baseUrl, new Credentials\HttpBasic($userName, $password));
    }
{% elseif security.type == 'httpBearer' %}
    public static function build(string $baseUrl, string $token): self
    {
        return new self($baseUrl, new Credentials\HttpBearer($token));
    }
{% elseif security.type == 'apiKey' %}
    public static function build(string $baseUrl, string $token): self
    {
        return new self($baseUrl, new Credentials\ApiKey($token, '{{ security.name }}', '{{ security.in }}'));
    }
{% elseif security.type == 'clientCredentials' %}
    public static function build(string $baseUrl, string $clientId, string $clientSecret, ?TokenStoreInterface $tokenStore = null, ?array $scopes = null): self
    {
        return new self($baseUrl, new Credentials\ClientCredentials($clientId, $clientSecret, '{{ security.tokenUrl }}', '{{ security.authorizationUrl }}', $tokenStore, $scopes));
    }
{% elseif security.type == 'authorizationCode' %}
    public static function build(string $baseUrl, string $clientId, string $clientSecret, ?TokenStoreInterface $tokenStore = null, ?array $scopes = null): self
    {
        return new self($baseUrl, new Credentials\AuthorizationCode($clientId, $clientSecret, '{{ security.tokenUrl }}', '{{ security.authorizationUrl }}', $tokenStore, $scopes));
    }
{% endif %}
}
